<!doctype html>

<!-- Coded by C. M. Mitchell
		-->

<html>
	<head>
		<meta charset="utf-8">
		<title>WW2 Map [v0.0.269] </title>

		<!-- Stylesheets -->
		<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css" />
		<link rel="stylesheet" type="text/css" href="https://cmmitchell.github.io/Webmap2/Stylesheets/measure_tool.css"/>
		<link rel="stylesheet" type="text/css" href="https://cmmitchell.github.io/Webmap2/Stylesheets/css.css"/>
		<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />
		
		<!-- Javascript and other links-->
		<script type="text/javascript" src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/Webmap2/Java/gjson/measure_tool.js"></script>
		
		<!-- GeoJSON overlays -->
		<script type="text/javascript" src="https://cmmitchell.github.io/WorldMap/Shapefiles/World/Country_2007.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1939.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1940.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1941.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1942.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1943.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1944.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/ww2/countryww2/april1945.js"></script>
		
		<script type="text/javascript" src="https://cmmitchell.github.io/Webmap2/Java/gjson/Background.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/Webmap2/Java/gjson/Graticule_30.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/Webmap2/Java/gjson/Graticule_5.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/Webmap2/Java/gjson/Graticule_1.js"></script>

		
		<!-- Broken Stuff -->
		


		

		
		
<!doctype html>

<!-- Coded by C. M. Mitchell
	 For some unknown reason...
		-->

		
	</head>
		<body>
	
		<!-- Fade auomation for text box/legend thing -->

			
			<script>
				$(document).ready(function() {
					$('.legend').delay(1000).fadeOut('normal');
					$('.img').hover(
						function() {
							$('.legend').fadeIn('normal');
						},
						function() {
							$('.legend').fadeOut('normal');
						}
					);
				});
				
			</script>

						<!-- Logo or somthing -->
			</div>
			

			<div id="map"></div>
	
			<script>
			
			
			//calling geo JASON and embeded styles from javascript
			//============================================	
			//=================Background=================
			//============================================
			
			
				function AllianceColor(a) {
					return a === 'Neutral' ? "#949494":
							a === 'Axis' ? "#690001":
							a === 'Axis-occupied' ? "#84000f":
							a === 'Axis Protectorate' ? "#a4000a":
							a === 'Axis-aligned' ? "#9f2123":
							a === 'Comintern' ? "#110040":
							a === 'Allies' ? "#402ea5":
							a === 'Allies-aligned' ? "#402ea5":
							"#d1d1d1";

				}

				function countryww2(feature){
					return {
						fillColor: AllianceColor(feature.properties.group),
						weight: 25, fillOpacity: 1,
						color: AllianceColor(feature.properties.group), weight: 1.25, opacity: 1
					};


				}
				var a = L.geoJson(bak, {
					style: back})
					a1 = L.geoJson(bak, {
					style: backblack})
				
					b39 = L.geoJson(a1939, {
					style: countryww2})
					
					b40 = L.geoJson(a1940, {
					style: countryww2})
					
					b41 = L.geoJson(a1941, {
					style: countryww2})
					
					b42 = L.geoJson(a1942, {
					style: countryww2})
					
					b43 = L.geoJson(a1943, {
					style: countryww2})
					
					b44 = L.geoJson(a1944, {
					style: countryww2})
					
					b45 = L.geoJson(a1945, {
					style: countryww2})
					
					
					
					
					
				
					
				
					c = L.geoJson(World_simp, {
					style: World_S,
					onEachFeature: function (feature, layer){popupOptions = {color: "#5D6D7E", maxWidth: 250};
					layer.bindPopup("<b>Country:</b> " + feature.properties.CNTRY_NAME,popupOptions);
										}
					})
				
					//===========================================

	//this is a seperating line ----------------------------------------------------------------------------------

				
				//========================================
				//========== Grats =======================
				//========================================
				
					
				
					k = L.geoJson(grat, {
					style: gratst,
					//onEachFeature: function (feature, layer){popupOptions = {color: "#5D6D7E", maxWidth: 250};
					//layer.bindPopup("<b>degrees:</b> " + feature.properties.degrees,popupOptions);
					//}
					})
				
					k1 = L.geoJson(grat1, {
					style: gratsty1,
					//onEachFeature: function (feature, layer){popupOptions = {color: "#5D6D7E", maxWidth: 250};
					//layer.bindPopup("<b>degrees:</b> " + feature.properties.degrees,popupOptions);
					//}
					})
				
					k5 = L.geoJson(grat5, {
					style: gratsty5,
					//onEachFeature: function (feature, layer){popupOptions = {color: "#5D6D7E", maxWidth: 250};
					//layer.bindPopup("<b>degrees:</b> " + feature.properties.degrees,popupOptions);
					//}
					})
					
	//==================================================================================
	//===============================Layer Groups=======================================
	//==================================================================================
				
				//===================================================
				//assigning variables to layers for control
				//===================================================
				
					//=================background=================
				var aShp = L.layerGroup([a]),
					a1Shp = L.layerGroup([a1]),
				    	b39Shp = L.layerGroup([b39]),
				    	b40Shp = L.layerGroup([b40]),
				    	b41Shp = L.layerGroup([b41]),
				    	b42Shp = L.layerGroup([b42]),
					b43Shp = L.layerGroup([b43]),
					b44Shp = L.layerGroup([b44]),
					b45Shp = L.layerGroup([b45]),
					
					
					
					
					
				    	cShp = L.layerGroup([c, a]),
				    	
					
					
					
					
					
					
					
					
					
					//=================country=================

				    

					kShp = L.layerGroup([k]),
				    	k1Shp = L.layerGroup([k1]),
				    	k5Shp = L.layerGroup([k5]);

			
					//rivers
				//background images
	//this is a seperating line ----------------------------------------------------------------------------------
				//set map extent, view, and default layer
				var map = L.map('map', {
					layers: [aShp],
					zoomDelta: 0.15,
					zoomSnap: 0
					}).setView([0, 0], 4.5);
					
       				//	}).setView([7.1328, -3.6559], 9.5);	
				//	}).setView([-0.9530146, 32.930699], 6.5);

	//this is a seperating line ----------------------------------------------------------------------------------
			
				//Create Layered Groups
				//create basemaps variable to call within the control
				var baseMaps = {

					"Water Background": aShp,
					"Black Background": a1Shp,
					
					"Country (Modern)": cShp,
				};
				
				//create overlays variable to call within the control. Calls layer groups
				var overLays = {					
					"1939": b39Shp,
					"1940": b40Shp,
					"1941": b41Shp,
					"1942": b42Shp,
					"1943": b43Shp,
					"1944": b44Shp,
					"1945": b45Shp,
					// 経度緯度
					"Graticules 30":kShp,
					"Graticules 5":k5Shp,
					"Graticules 1":k1Shp,

					
				};
				
		//this is a seperating line ----------------------------------------------------------------------------------

				
				//add control to map
				L.control.layers(baseMaps, overLays).addTo(map);
				
				L.control.scale({maxWidth: 150}).addTo(map);
				L.control.fullscreen().addTo(map);

				

		//this is a seperating line ----------------------------------------------------------------------------------

				
				var legend2 = L.control({position: 'bottomright'});
				legend2.onAdd = function (map) {	
				var div = L.DomUtil.create('div', 'info legend'),
					labels = ['<strong>Region</strong>'],
					categories = ['Axis', 'Axis-occupied', 'Axis Protectorate', 'Axis-aligned', 'Comintern', 'Allies', 'Allies-occupied', 'Other'];
					

					for (var i = 0; i < categories.length; i++) {

					    div.innerHTML += 
					    labels.push(
						'<QS style="background:' + AllianceColor(categories[i]) + '"></QS> ' +
					    (categories[i] ? categories[i] : '+'));

					}
					div.innerHTML = labels.join('<br>');
				    return div;
				    };

		//this is a seperating line ----------------------------------------------------------------------------------
				
				map.on('overlayadd', function(eventLayer){
				    if (eventLayer.name === '1939'){
					map.addControl(legend2);
				    } else if (eventLayer.name === '1940'){
					map.addControl(legend2);
				    } else if (eventLayer.name === '1941'){
					map.addControl(legend2);
				    } else if (eventLayer.name === '1942'){
					map.addControl(legend2);
				    } else if (eventLayer.name === '1943'){
					map.addControl(legend2);
				    } else if (eventLayer.name === '1944'){
					map.addControl(legend2);
				    }else if (eventLayer.name === '1945'){
					map.addControl(legend2);
				    }
				});

				map.on('overlayremove', function(eventLayer){

				    if (eventLayer.name === '1939'){
					map.removeControl(legend2);
				    } else if (eventLayer.name === '1940'){
					map.removeControl(legend2);
				    } else if (eventLayer.name === '1941'){
					map.removeControl(legend2);;
				    } else if (eventLayer.name === '1942'){
					map.removeControl(legend2);
				    } else if (eventLayer.name === '1943'){
					map.removeControl(legend2);
				    } else if (eventLayer.name === '1944'){
					map.removeControl(legend2);
				    } else if (eventLayer.name === '1945'){
					map.removeControl(legend2);
				    } 
				});
			
			</script>
			
		</body>
